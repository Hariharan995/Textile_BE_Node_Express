openapi: 3.0.0

info:
  title: Textile

components:
  securitySchemes:
    bearerAuth:            
      type: http
      scheme: bearer
      bearerFormat: JWT    

# security:
#   - bearerAuth: []
# summary: Submit email address and password to login
servers:
  - url: http://localhost:3001/
    description: Local server

paths:               
  /register:
    post:      
      tags:
       - "AUTHENDICATION"
      description: ""
      operationId: register      
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                mobile:
                  type: string
                  example: "1234567890"
                countryCode:
                  type: string
                  example: "+91"
                email:
                  type: string
                  example: "jason@example.com"
                password:
                  type: string
                  example: "Pass@123"
                name:
                  type: string
                  example: "Jack"
                userRole: 
                  type: string
                  example: "BUYER or SELLER or CURATOR"  
                sellerType: 
                  type: string
                  example: "BY_REGISTER or BUYER_TO_SELLER or BY_STATIC"
                referralCode:
                  type: string
                  example: "rxsq"               
              required:   
                - mobile            
                - password
                - name
                - userRole
                - sellerType
      responses:
        "200":
          description: Success
        "400":
          description: Bad Request Error
        "401":
          description: Unauthorized Error
  
  /login:
    post:
      tags:
      - "AUTHENDICATION"
      description: ""
      operationId: login      
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string  
                  example: "1234567890"                 
                password:
                  type: string    
                  example: "Pass@123"                           
              required:
                - username
                - password                
      responses:
        "200":
          description: Success
        "400":
          description: Bad Request Error
        "401":
          description: Unauthorized Error
 
  /socialLogin:
    post:
      tags:
      - "AUTHENDICATION"
      description: ""
      operationId: socialLogin     
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string  
                  example: "xyz@gmail.com" 
                name: 
                  type: String
                  example: "Jack"         
                userRole: 
                  type: String 
                  example: "SELLER or BUYER"
                sellerType: 
                  type: string
                  example: "BY_REGISTER or BUYER_TO_SELLER or BY_STATIC"                                                    
              required:
                - email
                - name
                - userRole  
                - sellerType       
      responses:
        "200":
          description: Success
        "400":
          description: Bad Request Error
        "401":
          description: Unauthorized Error
    
  /logout:
    post:
      tags:
      - "AUTHENDICATION"
      description: ""
      operationId: logout      
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                token:
                  type: string                                      
              required:
                - token               
      responses:
        "200":
          description: Success
        "400":
          description: Bad Request Error
        "401":
          description: Unauthorized Error
 
  /forgotPassword:
    post:
      tags:
      - "AUTHENDICATION"
      description: ""
      operationId: forgotpassword      
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string                                   
              required:
                - username                              
      responses:
        "200":
          description: Success
        "400":
          description: Bad Request Error
        "401":
          description: Unauthorized Error
  
  /changePassword:
    post:
      tags:
      - "AUTHENDICATION"
      description: ""
      operationId: changePassword      
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                password:
                  type: string
                confirmPassword:
                  type: string                                  
              required:
                - username  
                - password
                - confirmPassword                            
      responses:
        "200":
          description: Success
        "400":
          description: Bad Request Error
        "401":
          description: Unauthorized Error

  /otpVerification:    
    post:    
      tags:
      - "AUTHENDICATION"
      description: ""
      operationId: otpVerification      
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                mobileOtp:  
                  type: string                                          
                otp:  
                  type: string                                                   
              required:
                - username                                           
      responses:
        "200":
          description: Success
        "400":
          description: Bad Request Error
        "401":
          description: Unauthorized Error

  /resendOtp:
    post:
      tags:
      - "AUTHENDICATION"
      description: ""
      operationId: resendOtp      
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                mobile:
                  type: string                                                          
      responses:
        "200":
          description: Success
        "400":
          description: Bad Request Error
        "401":
          description: Unauthorized Error
  
  /refreshToken:
    post:
      tags:
      - "AUTHENDICATION"
      description: ""
      operationId: refreshToken      
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                userId:
                  type: string
                token:
                  type: string 
              required:
                - userId
                - token                                            
      responses:
        "200":
          description: Success
        "400":
          description: Bad Request Error
        "401":
          description: Unauthorized Error
   
  /getUserById: 
    parameters:
        - name: id
          in: query
          type: string
          required: true
        - name: isSeller
          in: query
          type: boolean
          required: true  
    get: 
      security:
        - bearerAuth: []     
      tags:
       - "USER"
      operationId: getUserById   
      responses:
        "200":
          description: Success
        "400":
          description: Bad Request Error
        "401":
          description: Unauthorized Error    

  # /deleteUser:
  #   delete:
  #     security:
  #       - bearerAuth: []
  #     tags:
  #     - "ADMIN"
  #     description: ""
  #     operationId: deleteUser      
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             type: object
  #             properties:
  #               userId:
  #                 type: string                          
  #             required:
  #               - userId                                     
  #     responses:
  #       "200":
  #         description: Success
  #       "400":
  #         description: Bad Request Error
  #       "401":
  #         description: Unauthorized Error
 
  /getAllUsers:
    post:
      security:
        - bearerAuth: []
      tags:
      - "ADMIN"
      description: ""
      operationId: getAllUsers 
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                agentId:
                  type: string
                filterObj:
                  type: object
                  properties:
                    userRole: 
                      type: string
                    field: 
                      type: string
                    value: 
                      type: string
                    isActive:
                      type: boolean
                sortObj:
                  type: object
                  properties:
                    createdAt: 
                      type: number   
                page:
                  type: number
                limit:
                  type: number                        
      responses:
        "200":
          description: Success
        "400":
          description: Bad Request Error
        "401":
          description: Unauthorized Error  
  
components:
  responses:
    UnauthorizedError:
      description: Access token is missing or invalid  